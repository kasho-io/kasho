{"id":"kasho-0fy","title":"Update Dockerfile for MySQL support","description":"Update the Dockerfile to build MySQL services and include MySQL client tools.\n\n## New Build Targets\n```dockerfile\n# Build MySQL services\nRUN go build -ldflags=\"${LDFLAGS}\" -o /app/mysql-change-stream ./services/mysql-change-stream/cmd/server\nRUN go build -ldflags=\"${LDFLAGS}\" -o /app/mysql-bootstrap-sync ./tools/runtime/mysql-bootstrap-sync\n\n# Rename translicator build\nRUN go build -ldflags=\"${LDFLAGS}\" -o /app/translicator ./services/translicator/cmd/server\n```\n\n## Additional Dependencies\n```dockerfile\n# Add MySQL client tools\nRUN apt-get update \u0026\u0026 apt-get install -y \\\n    postgresql-client \\\n    default-mysql-client \\\n    \u0026\u0026 rm -rf /var/lib/apt/lists/*\n```\n\n## Binary List Update\nEnsure all binaries are copied to final image:\n- pg-change-stream\n- mysql-change-stream\n- translicator (renamed from pg-translicator)\n- pg-bootstrap-sync\n- mysql-bootstrap-sync\n\n## Estimated Effort: 0.5 days","status":"open","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:31:06.754056-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T10:31:06.754056-08:00","dependencies":[{"issue_id":"kasho-0fy","depends_on_id":"kasho-cdr","type":"blocks","created_at":"2026-01-17T10:32:04.589814-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-0fy","depends_on_id":"kasho-md7","type":"blocks","created_at":"2026-01-17T10:32:04.683309-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-0fy","depends_on_id":"kasho-0vr","type":"blocks","created_at":"2026-01-17T10:32:04.774268-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-0fy","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.436944-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-0vr","title":"Rename pg-translicator to translicator and add MySQL dialect support","description":"Rename the translicator service to be database-agnostic and add support for MySQL SQL dialect.\n\n## Renaming\n- Rename services/pg-translicator/ to services/translicator/\n- Update all imports, docker-compose files, documentation\n- Update Dockerfile build targets\n\n## Dialect Abstraction\nCreate pkg/dialect/ with interface and implementations:\n\n```go\n// pkg/dialect/dialect.go\ntype Dialect interface {\n    QuoteIdentifier(name string) string      // \"table\" vs `table`\n    FormatBool(b bool) string                // true vs 1\n    FormatTimestamp(t time.Time) string\n    Placeholder(index int) string            // $1 vs ?\n    SyncSequences(ctx context.Context, db *sql.DB) error\n}\n\n// pkg/dialect/postgres.go\ntype PostgresDialect struct{}\n\n// pkg/dialect/mysql.go  \ntype MySQLDialect struct{}\n```\n\n## SQL Generation Changes (services/translicator/internal/sql/sql.go)\n- Update toInsertSQL, toUpdateSQL, toDeleteSQL to use dialect\n- PostgreSQL: `$1, $2, $3` placeholders, `\"identifier\"` quoting\n- MySQL: `?, ?, ?` placeholders, `\\`identifier\\`` quoting\n- Boolean: PostgreSQL true/false, MySQL 1/0\n\n## SyncSequences Changes\n- PostgreSQL: Query pg_class, pg_depend, use setval()\n- MySQL: Query INFORMATION_SCHEMA, use ALTER TABLE AUTO_INCREMENT\n\n## Configuration\n- Add DIALECT or DATABASE_TYPE environment variable\n- Auto-detect from connection string if possible\n\n## Estimated Effort: 1-2 weeks","notes":"## Session/Trigger Handling (Additional Detail)\n- PostgreSQL: SET session_replication_role = 'replica'\n- MySQL: SET FOREIGN_KEY_CHECKS=0; SET UNIQUE_CHECKS=0; (or disable triggers)\n\nThis needs to be abstracted in the dialect layer so the translicator can handle both databases.","status":"closed","priority":2,"issue_type":"feature","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:28:40.449256-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T11:42:17.08645-08:00","closed_at":"2026-01-17T11:42:17.08645-08:00","close_reason":"Implemented in feature/mysql-support branch","dependencies":[{"issue_id":"kasho-0vr","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.054839-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-2nj","title":"Secure demo environment: fix Redis/gRPC exposure","description":"BSI flagged our Hetzner VPS for having Redis exposed to the internet without authentication. Need to lock down internal services and configure Hetzner firewall.","status":"closed","priority":1,"issue_type":"epic","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T08:45:34.339982-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T08:57:48.04972-08:00","closed_at":"2026-01-17T08:57:48.04972-08:00","close_reason":"All security hardening complete - firewall configured and docker-compose updated"}
{"id":"kasho-3bw","title":"Fix DDL timestamp using time.Now() instead of event time","description":"## Location\nservices/mysql-change-stream/internal/server/binlogparser.go:167-191\n\n## Issue\nDDL metadata uses current time instead of event timestamp:\n\n```go\nddl := types.DDLData{\n    ID:       0,\n    Time:     time.Now(),  // WRONG: Uses current time, not event time\n    Username: \"\",\n    Database: string(e.Schema),\n    DDL:      query,\n}\n```\n\nUsing `time.Now()` instead of the event's timestamp means DDL changes are timestamped when they're processed, not when they occurred.\n\n## Impact\nBreaks causality and audit trails in replica database.\n\n## Fix\nExtract timestamp from the binlog event header and use that instead of `time.Now()`.","status":"closed","priority":2,"issue_type":"bug","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T12:59:13.082451-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T15:21:31.876247-08:00","closed_at":"2026-01-17T15:21:31.876247-08:00","close_reason":"Fixed: DDL timestamp now uses event header instead of time.Now() - PR #51 merged"}
{"id":"kasho-3ds","title":"Create MySQL setup SQL scripts","description":"Create MySQL-equivalent SQL scripts for database setup.\n\n## New Directory Structure\nsql/mysql/\n├── setup/\n│   ├── setup-replication.sql\n│   └── verify-prerequisites.sql\n├── reset/\n│   └── reset-schema.sql\n└── demo/\n    └── fake_projmgmt_saas.sql\n\n## setup-replication.sql\n```sql\n-- Create replication user\nCREATE USER IF NOT EXISTS 'kasho'@'%' IDENTIFIED BY '${KASHO_PASSWORD}';\n\n-- Grant replication privileges (source database)\nGRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'kasho'@'%';\nGRANT SELECT ON *.* TO 'kasho'@'%';\n\n-- For replica database, grant write access\n-- GRANT ALL PRIVILEGES ON ${DATABASE}.* TO 'kasho'@'%';\n\nFLUSH PRIVILEGES;\n```\n\n## verify-prerequisites.sql\n```sql\n-- Check binary logging is enabled\nSHOW VARIABLES LIKE 'log_bin';\n-- Should be ON\n\n-- Check binlog format\nSHOW VARIABLES LIKE 'binlog_format';\n-- Should be ROW\n\n-- Check binlog row image\nSHOW VARIABLES LIKE 'binlog_row_image';\n-- Should be FULL\n\n-- Check GTID mode (recommended)\nSHOW VARIABLES LIKE 'gtid_mode';\n-- Should be ON for GTID-based replication\n```\n\n## demo/fake_projmgmt_saas.sql\nConvert PostgreSQL schema to MySQL:\n- UUID → CHAR(36)\n- TIMESTAMP WITH TIME ZONE → DATETIME\n- TEXT → TEXT or VARCHAR\n- SERIAL → INT AUTO_INCREMENT\n- Remove PostgreSQL-specific syntax\n\n## Key Differences from PostgreSQL\n- No event triggers needed (DDL is in binlog)\n- No publication system (binlog captures everything)\n- No pg_hba.conf (use GRANT statements)\n- Different privilege model\n\n## Estimated Effort: 1-2 days","status":"closed","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:31:40.478279-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T11:20:42.653748-08:00","closed_at":"2026-01-17T11:20:42.653748-08:00","close_reason":"Implemented in feature/mysql-support branch","dependencies":[{"issue_id":"kasho-3ds","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.89926-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-3no","title":"Remove external port exposure for Redis in demo docker-compose","description":"Change Redis from 'ports: 6379:6379' to 'expose: [6379]' so it's only accessible within the Docker network. This prevents external access to the unauthenticated Redis instance.","status":"closed","priority":1,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T08:45:41.773489-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T08:47:37.200508-08:00","closed_at":"2026-01-17T08:47:37.200508-08:00","close_reason":"Changed ports to expose in docker-compose.yml","dependencies":[{"issue_id":"kasho-3no","depends_on_id":"kasho-2nj","type":"blocks","created_at":"2026-01-17T08:45:56.41488-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-3pi","title":"Rename environments to be database-explicit","description":"Rename environment directories to explicitly indicate which database they use.\n\n## Directory Renames\n- environments/development/ → environments/pg-development/\n- environments/demo/ → environments/pg-demo/\n\n## Files to Update in Each Environment\n- docker-compose.yml (service names, image references)\n- .env and .env.example (variable names if needed)\n- primary-init.d/ scripts\n- replica-init.d/ scripts\n- config/transforms.yml (no changes needed, database-agnostic)\n\n## Docker Compose Service Name Updates\n- postgres-primary (keep, already explicit)\n- postgres-replica (keep, already explicit)\n- pg-change-stream (keep, already explicit)\n- pg-translicator → translicator (after rename)\n\n## Script Updates\n- scripts/development/populate-postgres-init.sh → scripts/development/populate-pg-init.sh\n- scripts/runtime/bootstrap-kasho.sh → scripts/runtime/bootstrap-pg.sh\n\n## SQL Directory Restructure\n- sql/setup/ → sql/pg/setup/\n- sql/reset/ → sql/pg/reset/\n- sql/demo/ → sql/pg/demo/\n\n## Estimated Effort: 3-5 days","notes":"## Script Path Updates (Additional Detail)\nWhen restructuring sql/ to sql/pg/:\n- scripts/development/populate-postgres-init.sh references sql/ paths\n- These scripts need updating to sql/pg/ paths\n- Any other scripts referencing sql/ directory should be checked","status":"closed","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:29:04.522222-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T11:20:42.647305-08:00","closed_at":"2026-01-17T11:20:42.647305-08:00","close_reason":"Implemented in feature/mysql-support branch","dependencies":[{"issue_id":"kasho-3pi","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.150434-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-3vg","title":"Configure Hetzner Cloud firewall for demo VPS","description":"Create firewall in Hetzner Cloud Console with these inbound rules:\n- Port 22 (SSH): Allow\n- Port 80, 443 (HTTP/HTTPS): Allow  \n- Port 5432, 5433 (PostgreSQL): Allow (needed by Vercel demo app)\n- All other ports: Deny (default)\n\nThis blocks Redis (6379), gRPC (50051), and any other services from external access.","status":"closed","priority":1,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T08:45:41.984807-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T08:56:43.222256-08:00","closed_at":"2026-01-17T08:56:43.222256-08:00","close_reason":"Hetzner Cloud Firewall configured - verified Redis and gRPC ports are blocked","dependencies":[{"issue_id":"kasho-3vg","depends_on_id":"kasho-2nj","type":"blocks","created_at":"2026-01-17T08:45:56.594622-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-4i7","title":"Create MySQL development and demo environments","description":"Create new environment directories for MySQL development and demo.\n\n## New Directories\n- environments/mysql-development/\n- environments/mysql-demo/\n\n## docker-compose.yml for MySQL\n```yaml\nservices:\n  mysql-primary:\n    image: mysql:8.0\n    command: \u003e\n      --server-id=1\n      --log-bin=mysql-bin\n      --binlog-format=ROW\n      --binlog-row-image=FULL\n      --gtid-mode=ON\n      --enforce-gtid-consistency=ON\n    environment:\n      MYSQL_ROOT_PASSWORD: ${PRIMARY_DATABASE_SU_PASSWORD}\n      MYSQL_DATABASE: ${PRIMARY_DATABASE_DB}\n      MYSQL_USER: ${PRIMARY_DATABASE_USER}\n      MYSQL_PASSWORD: ${PRIMARY_DATABASE_PASSWORD}\n    ports:\n      - \"3306:3306\"\n    volumes:\n      - mysql-primary-data:/var/lib/mysql\n      - ./primary-init.d:/docker-entrypoint-initdb.d:ro\n\n  mysql-replica:\n    image: mysql:8.0\n    # Similar config...\n\n  redis:\n    image: redis:7-alpine\n    # Same as PostgreSQL environments\n\n  mysql-change-stream:\n    image: kasho\n    command: [\"./mysql-change-stream\"]\n    environment:\n      KV_URL: redis://redis:6379\n      PRIMARY_DATABASE_URL: mysql://${PRIMARY_DATABASE_USER}:${PRIMARY_DATABASE_PASSWORD}@mysql-primary:3306/${PRIMARY_DATABASE_DB}\n    depends_on:\n      - mysql-primary\n      - redis\n\n  translicator:\n    image: kasho\n    command: [\"./translicator\"]\n    environment:\n      CHANGE_STREAM_SERVICE_ADDR: mysql-change-stream:50051\n      REPLICA_DATABASE_URL: mysql://...\n      DATABASE_TYPE: mysql\n    depends_on:\n      - mysql-change-stream\n      - mysql-replica\n```\n\n## MySQL Init Scripts (primary-init.d/)\n- 00-reset-schema.sql (MySQL syntax)\n- 10-demo-data.sql (MySQL syntax - CHAR(36) for UUID, DATETIME for timestamps)\n- 20-create-kasho-user.sql (GRANT REPLICATION SLAVE, REPLICATION CLIENT)\n\n## Environment Variables (.env)\n- PRIMARY_DATABASE_URL=mysql://root:password@mysql-primary:3306/primary_db\n- REPLICA_DATABASE_URL=mysql://root:password@mysql-replica:3306/replica_db\n- DATABASE_TYPE=mysql\n\n## Scripts\n- scripts/development/populate-mysql-init.sh\n- scripts/runtime/bootstrap-mysql.sh\n\n## Estimated Effort: 1-2 weeks","status":"open","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:29:06.362387-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T10:29:06.362387-08:00","dependencies":[{"issue_id":"kasho-4i7","depends_on_id":"kasho-cdr","type":"blocks","created_at":"2026-01-17T10:32:04.295342-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-4i7","depends_on_id":"kasho-0vr","type":"blocks","created_at":"2026-01-17T10:32:04.395408-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-4i7","depends_on_id":"kasho-3ds","type":"blocks","created_at":"2026-01-17T10:32:05.607396-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-4i7","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.24756-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-578","title":"Add .env.example files to environment directories","description":"Improve environment variable documentation:\n- Rename env.sample to .env.example in BOTH environments/development/ and environments/demo/ (more conventional naming)\n- Add comments documenting each variable's purpose\n- Keep Docker env separate from app env (correct separation)\n- Ensure .env.example is tracked in git, .env is gitignored","status":"closed","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T09:39:36.181497-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T09:46:18.247087-08:00","closed_at":"2026-01-17T09:46:18.247087-08:00","close_reason":"Closed"}
{"id":"kasho-64n","title":"Create test suites for MySQL services","description":"Create comprehensive test suites for all new MySQL components.\n\n## Test Files to Create\n\n### mysql-change-stream tests\n- services/mysql-change-stream/internal/server/binlogparser_test.go\n  - Test parsing of RowsEvent (INSERT, UPDATE, DELETE)\n  - Test parsing of QueryEvent (DDL)\n  - Test TableMapEvent handling\n  - Test data type conversions (MySQL types → proto ColumnValue)\n- services/mysql-change-stream/internal/server/grpc_test.go\n  - Reuse patterns from pg-change-stream tests\n\n### mysql-bootstrap-sync tests\n- tools/runtime/mysql-bootstrap-sync/internal/parser/dump_test.go\n  - Test parsing mysqldump INSERT statements\n  - Test extended insert format\n  - Test NULL handling\n  - Test character escaping\n  - Test various MySQL data types\n- tools/runtime/mysql-bootstrap-sync/internal/converter/position_test.go\n  - Test binlog position parsing\n  - Test GTID parsing\n  - Test bootstrap position generation\n\n### translicator dialect tests\n- pkg/dialect/postgres_test.go\n- pkg/dialect/mysql_test.go\n  - Test identifier quoting\n  - Test placeholder generation\n  - Test boolean formatting\n  - Test timestamp formatting\n\n### Updated translicator tests\n- services/translicator/internal/sql/sql_test.go\n  - Add MySQL dialect test cases\n  - Test SQL generation for both dialects\n\n## Test Fixtures Needed\n- Sample MySQL binlog events (binary format)\n- Sample mysqldump files (various formats)\n- MySQL schema definitions for test tables\n\n## Integration Tests\n- End-to-end test with real MySQL container\n- Bootstrap process test\n- Change streaming test\n\n## CI Updates\n- Add MySQL service to GitHub Actions\n- Run MySQL-specific tests\n\n## Estimated Effort: 2-3 weeks","status":"open","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:31:36.791408-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T10:31:36.791408-08:00","dependencies":[{"issue_id":"kasho-64n","depends_on_id":"kasho-cdr","type":"blocks","created_at":"2026-01-17T10:32:05.236048-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-64n","depends_on_id":"kasho-md7","type":"blocks","created_at":"2026-01-17T10:32:05.329829-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-64n","depends_on_id":"kasho-0vr","type":"blocks","created_at":"2026-01-17T10:32:05.422762-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-64n","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.714833-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-6im","title":"Fix division by zero in mysql-bootstrap-sync","description":"## Location\ntools/runtime/mysql-bootstrap-sync/internal/bootstrap/bootstrap.go:175,192\n\n## Issue\nDivision by zero potential in rate calculations:\n\nLine 175:\n```go\nrate := float64(stored) / elapsed.Seconds()  // elapsed.Seconds() could be 0\n```\n\nLine 192:\n```go\nfloat64(stored)/float64(len(changes))*100  // len(changes) could be 0\n```\n\n## Impact\nPanic on very fast completion or empty change sets.\n\n## Fix\nAdd guards to prevent division by zero:\n```go\nif elapsed.Seconds() \u003e 0 {\n    rate := float64(stored) / elapsed.Seconds()\n}\n```","status":"closed","priority":2,"issue_type":"bug","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T12:59:13.220043-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T15:16:20.703295-08:00","closed_at":"2026-01-17T15:16:20.703295-08:00","close_reason":"Closed"}
{"id":"kasho-717","title":"Add git hooks documentation","description":"Git hooks are complex and poorly documented:\n- Pre-commit runs prettier/lint but silently skips if task not installed\n- Multiple hook backup files suggest evolution\n- Add a section to CONTRIBUTING.md explaining what hooks do and how to set them up\n- Consider adding a check that warns if task is not installed","status":"closed","priority":3,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T09:39:36.480407-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T09:45:38.982265-08:00","closed_at":"2026-01-17T09:45:38.982265-08:00","close_reason":"Closed","dependencies":[{"issue_id":"kasho-717","depends_on_id":"kasho-de3","type":"blocks","created_at":"2026-01-17T09:39:40.757257-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-78k","title":"Standardize app prettier scripts","description":"Fix inconsistency in prettier scripts across apps:\n- Homepage has redundant prettier:write (same as prettier)\n- Standardize all three apps to have: prettier (write), prettier:check\n- Remove the duplicate prettier:write from homepage","status":"closed","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T09:39:36.083459-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T09:45:50.841257-08:00","closed_at":"2026-01-17T09:45:50.841257-08:00","close_reason":"Closed"}
{"id":"kasho-7dh","title":"Fix race condition in mysql-change-stream binlog client","description":"## Location\nservices/mysql-change-stream/internal/server/binlogclient.go:182-208\n\n## Issue\nThe canal field is accessed and modified without proper synchronization. The goroutine at line 204 runs AFTER unlocking, but EventHandler methods could start receiving events immediately.\n\n```go\nc.mu.Lock()\nif c.canal != nil {\n    c.canal.Close()\n}\nc.canal = canalInstance\nc.mu.Unlock()\n\n// Later: Run canal in a goroutine\ngo func() {\n    if err := canalInstance.RunFrom(startPos); err != nil {\n        log.Printf(\"Canal error: %v\", err)\n    }\n}()\n```\n\nEventHandler callbacks (`OnRow`, `OnDDL`, etc.) access `c.changeChan` and call `c.GetPosition()` which acquires `c.mu`, but there's no guarantee that `canalInstance.RunFrom()` is even running when these callbacks fire.\n\n## Impact\nPotential data races, panics, or dropped changes.\n\n## Fix\nEnsure proper synchronization between canal startup and event handling.","status":"closed","priority":1,"issue_type":"bug","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T12:59:12.945206-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T14:28:53.364107-08:00","closed_at":"2026-01-17T14:28:53.364107-08:00","close_reason":"Closed"}
{"id":"kasho-7mj","title":"Document docs app special requirements","description":"The docs app has hidden complexity that should be documented:\n- NODE_OPTIONS polyfill requirement for localStorage\n- Pagefind postbuild step\n- Add comments in package.json or a brief README in apps/docs explaining why these are needed","status":"closed","priority":3,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T09:39:36.380676-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T09:46:52.779101-08:00","closed_at":"2026-01-17T09:46:52.779101-08:00","close_reason":"Closed"}
{"id":"kasho-9x3","title":"Update Taskfile.yml for explicit database commands","description":"Update Taskfile.yml to use explicit database prefixes for all commands.\n\n## Command Renames\n| Current | New |\n|---------|-----|\n| dev:start | dev:pg:start |\n| dev:stop | dev:pg:stop |\n| dev:reset | dev:pg:reset |\n| dev:bootstrap | dev:pg:bootstrap |\n\n## New MySQL Commands\n- dev:mysql:start\n- dev:mysql:stop\n- dev:mysql:reset\n- dev:mysql:bootstrap\n\n## Test Commands\n- test:service:pg-change-stream (existing)\n- test:service:mysql-change-stream (new)\n- test:service:translicator (renamed from pg-translicator)\n- test:tool:pg-bootstrap-sync (existing, renamed path)\n- test:tool:mysql-bootstrap-sync (new)\n\n## No Default Behavior\nRemove implicit defaults - require explicit database selection:\n```yaml\ndev:start:\n  desc: \"[ERROR] Please specify database: dev:pg:start or dev:mysql:start\"\n  cmds:\n    - echo \"Please use dev:pg:start or dev:mysql:start\"\n    - exit 1\n```\n\n## SERVICES Variable Update\nUpdate the SERVICES variable to find services in new locations.\n\n## Estimated Effort: 0.5-1 day","status":"open","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:29:06.496093-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T10:29:06.496093-08:00","dependencies":[{"issue_id":"kasho-9x3","depends_on_id":"kasho-3pi","type":"blocks","created_at":"2026-01-17T10:32:04.494711-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-9x3","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.343711-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-b4b","title":"Update CI/CD for MySQL support","description":"Update GitHub Actions workflows to test and build MySQL components.\n\n## Test Workflow Updates (.github/workflows/test.yml)\n\nAdd MySQL service container:\n```yaml\nservices:\n  mysql:\n    image: mysql:8.0\n    env:\n      MYSQL_ROOT_PASSWORD: test\n      MYSQL_DATABASE: test_db\n    options: \u003e-\n      --health-cmd=\"mysqladmin ping\"\n      --health-interval=10s\n      --health-timeout=5s\n      --health-retries=5\n    ports:\n      - 3306:3306\n```\n\nAdd MySQL test jobs:\n```yaml\ntest-mysql-change-stream:\n  runs-on: ubuntu-latest\n  services:\n    mysql: ...\n  steps:\n    - uses: actions/checkout@v4\n    - name: Run mysql-change-stream tests\n      run: task test:service:mysql-change-stream\n\ntest-mysql-bootstrap-sync:\n  runs-on: ubuntu-latest\n  steps:\n    - uses: actions/checkout@v4\n    - name: Run mysql-bootstrap-sync tests\n      run: task test:tool:mysql-bootstrap-sync\n```\n\n## Build Workflow Updates\n- Build mysql-change-stream binary\n- Build mysql-bootstrap-sync binary\n- Ensure translicator (renamed) builds correctly\n\n## Container Publish Updates\n- Include all MySQL binaries in published image\n- Update image tags/labels if needed\n\n## Integration Test Matrix\nConsider testing against multiple MySQL versions:\n- MySQL 8.0 (primary target)\n- MySQL 8.4 (when go-mysql supports it)\n\n## Estimated Effort: 2-3 days","notes":"## Demo Deployment (Additional Detail)\nDemo app code supports both PostgreSQL and MySQL, but each deployment uses ONE database type:\n- Deployment configured via DATABASE_TYPE environment variable\n- Option A: Parameterized deployment (one workflow, db type as input)\n- Option B: Separate workflows (deploy-demo.yml for PG, deploy-mysql-demo.yml for MySQL)\n- Each deployment uses a single primary/replica pair (not both simultaneously)\n\ndemo.kasho.io could be PostgreSQL, mysql-demo.kasho.io could be MySQL (or vice versa).","status":"open","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:31:36.920345-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T10:44:58.043011-08:00","dependencies":[{"issue_id":"kasho-b4b","depends_on_id":"kasho-64n","type":"blocks","created_at":"2026-01-17T10:32:05.514697-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-b4b","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.80725-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-cdr","title":"Create mysql-change-stream service","description":"Create a new service for capturing changes from MySQL databases using binlog replication.\n\n## Technical Approach\n- Use go-mysql-org/go-mysql library (canal package) for binlog parsing\n- Implement EventHandler interface: OnRow, OnDDL, OnRotate, OnGTID, etc.\n- Handle MySQL binlog event types: RowsEvent, TableMapEvent, QueryEvent\n\n## Key Components to Create\n- services/mysql-change-stream/cmd/server/main.go\n- services/mysql-change-stream/internal/server/binlogclient.go (equivalent to walclient.go)\n- services/mysql-change-stream/internal/server/binlogparser.go (equivalent to walparser.go)\n- services/mysql-change-stream/internal/server/grpc.go (reuse patterns from pg-change-stream)\n- services/mysql-change-stream/internal/server/state.go\n\n## MySQL-Specific Considerations\n- Position tracking: Binlog file + position OR GTIDs (prefer GTIDs)\n- No replication slots - track position in Redis\n- DDL comes through QueryEvent in binlog (simpler than PostgreSQL event triggers!)\n- Must set binlog_format=ROW and binlog_row_image=FULL on MySQL server\n- MySQL 8.4+ has breaking changes in go-mysql (issue #866) - target 8.0 initially\n\n## Data Type Mapping\n- MySQL types to proto ColumnValue types\n- Handle MySQL-specific types: DATETIME, ENUM, SET, JSON, etc.\n\n## Differences from pg-change-stream\n- No pg_lsn type - use string binlog position or GTID\n- No replication slots to create/manage\n- No publication system\n- Schema info from INFORMATION_SCHEMA queries (canal handles this)\n\n## Estimated Effort: 4-5 weeks","notes":"## MySQL REPLICA IDENTITY Equivalent (Additional Detail)\n- binlog_row_image=FULL required for proper UPDATE/DELETE handling\n- Document this requirement in setup scripts (kasho-3ds)\n- This is configured at MySQL server level, not per-table like PostgreSQL\n\n## DDL Handling Clarification\n- MySQL: DDL comes from binlog QueryEvent directly\n- No kasho_ddl_log equivalent table needed (simpler than PostgreSQL!)\n- QueryEvent parsing extracts CREATE, ALTER, DROP statements","status":"closed","priority":2,"issue_type":"feature","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:26:22.241347-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T12:36:05.253017-08:00","closed_at":"2026-01-17T12:36:05.253017-08:00","close_reason":"mysql-change-stream service implemented with binlog client, parser, gRPC server, state management, and tests","dependencies":[{"issue_id":"kasho-cdr","depends_on_id":"kasho-wod","type":"blocks","created_at":"2026-01-17T10:32:04.093672-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-cdr","depends_on_id":"kasho-tsm","type":"blocks","created_at":"2026-01-17T10:45:07.641702-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-de3","title":"Create CONTRIBUTING.md with npm vs task guidance","description":"Create a CONTRIBUTING.md file that explains:\n- When to use npm vs task (decision tree)\n- Setup checklist for new developers\n- Overview of project structure\n- How Docker and local development work together\n\nThis is the highest-impact improvement for developer onboarding.","status":"closed","priority":1,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T09:39:35.982226-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T09:45:33.763996-08:00","closed_at":"2026-01-17T09:45:33.763996-08:00","close_reason":"Closed"}
{"id":"kasho-ect","title":"Add tests for pg-bootstrap-sync bootstrap orchestrator","description":"## Location\ntools/runtime/pg-bootstrap-sync/internal/bootstrap/bootstrap.go (0% coverage)\n\n## Issue\nThe PostgreSQL bootstrap orchestrator has no unit tests, similar to what we just added for mysql-bootstrap-sync.\n\n## Test Cases to Add\n- TestNewBootstrapper_DryRun - verify bootstrapper creation in dry run mode\n- TestNewBootstrapper_MaxRowsPerTable - verify config option\n- TestNewBootstrapper_InvalidKVURL - error handling for bad KV URL\n- TestBootstrapper_GetStatistics - verify statistics tracking\n- TestBootstrapper_Close - proper cleanup with nil kvBuffer\n- TestBootstrapper_Bootstrap_DryRun - end-to-end dry run with real pg_dump file\n- TestBootstrapper_Bootstrap_FileNotFound - error handling\n\n## Notes\nCan use the mysql-bootstrap-sync tests as a template - the bootstrap orchestrators are very similar.","status":"open","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T16:30:01.057971-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T16:30:01.057971-08:00"}
{"id":"kasho-ewp","title":"Update demo app for MySQL support","description":"Update the demo app to support both PostgreSQL and MySQL with a database selector.\n\n## Database Driver Abstraction\nCreate lib/db/ with implementations for each database:\n\n```typescript\n// lib/db/index.ts\nexport async function queryPrimary(sql: string, params?: unknown[]) {\n  const dbType = process.env.DATABASE_TYPE || 'postgres';\n  if (dbType === 'mysql') {\n    return queryMySQL(primaryPool, sql, params);\n  }\n  return queryPostgres(primaryPool, sql, params);\n}\n\n// lib/db/postgres.ts\nimport { Pool } from 'pg';\n// PostgreSQL implementation\n\n// lib/db/mysql.ts  \nimport mysql from 'mysql2/promise';\n// MySQL implementation\n```\n\n## Dependencies to Add\n- mysql2 (MySQL driver with Promise support)\n\n## Query Placeholder Abstraction\n```typescript\n// Current (PostgreSQL): $1, $2, $3\n// MySQL: ?, ?, ?\n\nfunction placeholder(index: number): string {\n  return process.env.DATABASE_TYPE === 'mysql' ? '?' : `$${index}`;\n}\n```\n\n## UI Updates\nReplace hardcoded strings:\n- app/page.tsx line 160: \"(primary_db@postgres-primary:5432)\" → dynamic\n- app/page.tsx line 217: \"(replica_db@postgres-replica:5432)\" → dynamic\n- components/DatabaseStatus.tsx: All hardcoded PostgreSQL references\n\nUse environment variables:\n```\nNEXT_PUBLIC_DATABASE_TYPE=postgres|mysql\nNEXT_PUBLIC_PRIMARY_HOST=postgres-primary|mysql-primary\nNEXT_PUBLIC_PRIMARY_PORT=5432|3306\nNEXT_PUBLIC_REPLICA_HOST=postgres-replica|mysql-replica\nNEXT_PUBLIC_REPLICA_PORT=5432|3306\n```\n\n## Optional: Database Badge Component\nShow which database is active in the UI.\n\n## Estimated Effort: 4-5 days","notes":"## Database Abstraction Layer (Additional Detail)\n- Create lib/db/ with postgres.ts and mysql.ts implementations\n- Database type determined by DATABASE_TYPE env var at deploy time\n- Single primary/replica pair per deployment (not both simultaneously)\n- Connection labels show actual database type based on config\n- Add mysql2 package dependency\n\n## Query Abstraction\n- PostgreSQL: $1, $2 placeholders, \"identifier\" quoting\n- MySQL: ? placeholders, \\`identifier\\` (backtick) quoting\n- Abstract SQL differences in db layer\n\n## Homepage Consideration\n- apps/homepage may need minor updates when MySQL is supported\n- Update tagline if it references PostgreSQL specifically\n\n## Implementation Complete (2026-01-17)\nDatabase abstraction layer implemented in commit d9cab33:\n- lib/db-factory.ts: DatabasePool interface with PostgreSQL and MySQL implementations\n- lib/db.ts: Updated to use lazy initialization with db-factory\n- app/api/database-info/route.ts: API endpoint for dynamic UI display\n- app/page.tsx: Dynamic database connection display\n- .env.example: Documentation for both database types","status":"closed","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:31:10.796579-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T11:42:17.090207-08:00","closed_at":"2026-01-17T11:42:17.090207-08:00","close_reason":"Implemented in feature/mysql-support branch","dependencies":[{"issue_id":"kasho-ewp","depends_on_id":"kasho-4i7","type":"blocks","created_at":"2026-01-17T10:32:04.867357-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-ewp","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.529754-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-fnr","title":"Update documentation for MySQL support","description":"Update all documentation to support both PostgreSQL and MySQL with tabbed content.\n\n## Documentation Architecture\nUse Nextra's Tabs component for side-by-side PostgreSQL/MySQL content:\n\n```mdx\nimport { Tabs, Tab } from 'nextra/components'\n\n\u003cTabs items={['PostgreSQL', 'MySQL']}\u003e\n  \u003cTab\u003ePostgreSQL content...\u003c/Tab\u003e\n  \u003cTab\u003eMySQL content...\u003c/Tab\u003e\n\u003c/Tabs\u003e\n```\n\n## Files Requiring Updates\n\n### index.mdx (Low effort)\n- Update service name references (pg-* → explicit)\n- Add MySQL to supported databases callout\n- Update \"PostgreSQL 15+\" to \"PostgreSQL 15+ or MySQL 8.0+\"\n\n### quick-start.mdx (High effort)\n- Tab WAL config vs binlog config\n- Tab connection string examples\n- Tab docker-compose examples\n- Tab verification commands\n\n### database-setup.mdx (Very High effort - most PostgreSQL-specific)\n- Tab version requirements\n- Tab server configuration (postgresql.conf vs my.cnf)\n- Tab user creation (CREATE ROLE vs CREATE USER)\n- Tab privilege grants (different syntax)\n- Tab DDL replication setup (event triggers vs binlog - MySQL is simpler!)\n- Tab pg_hba.conf vs MySQL grants\n- Tab connection testing (psql vs mysql)\n\n### bootstrap.mdx (High effort)\n- Tab replication slot vs GTID position\n- Tab pg_dump vs mysqldump\n- Tab LSN vs binlog position\n- Tab monitoring commands\n\n### configuration.mdx (Medium effort)\n- Tab connection string formats\n- Tab environment variables\n\n### container-images.mdx (Low effort)\n- Update service names\n\n### transforms.mdx (No changes - database-agnostic)\n### license.mdx (No changes)\n\n## MySQL-Specific Content to Write\n- MySQL binlog configuration requirements\n- MySQL user privileges for replication\n- MySQL bootstrap process differences\n- MySQL monitoring queries\n\n## Estimated Effort: 7-10 days","notes":"## Additional Documentation Updates (Additional Detail)\nBeyond the tabbed content in apps/docs/, these files also need updates:\n- README.md - Update architecture section for multi-database support\n- CONTRIBUTING.md - Add MySQL development workflow\n- AGENTS.md - Update if service names change (pg-translicator → translicator)\n\nThese are in the repo root, not apps/docs/.","status":"open","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:31:10.931665-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T10:44:57.926448-08:00","dependencies":[{"issue_id":"kasho-fnr","depends_on_id":"kasho-cdr","type":"blocks","created_at":"2026-01-17T10:32:04.960966-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-fnr","depends_on_id":"kasho-md7","type":"blocks","created_at":"2026-01-17T10:32:05.052577-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-fnr","depends_on_id":"kasho-0vr","type":"blocks","created_at":"2026-01-17T10:32:05.143348-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-fnr","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:13.622641-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-gjo","title":"Fix aspirational test scripts in Taskfile","description":"The Taskfile references test:e2e and test:ci patterns but apps only have placeholder tests. Options:\n- Remove references to non-existent test commands from Taskfile\n- OR add TODO comments making it clear these are planned, not implemented\n- Ensure task test doesn't give false confidence about test coverage","status":"closed","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T09:39:36.279743-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T09:46:33.405496-08:00","closed_at":"2026-01-17T09:46:33.405496-08:00","close_reason":"Closed"}
{"id":"kasho-iw5","title":"Fix goroutine leak in mysql-change-stream","description":"## Location\nservices/mysql-change-stream/cmd/server/main.go:124-144\n\n## Issue\nThe goroutine processing changes never terminates on error. It keeps running when a new client is created, leading to memory accumulation and resource exhaustion.\n\n```go\ngo func(c *server.Client) {\n    for {\n        select {\n        case \u003c-ctx.Done():\n            return\n        case change, ok := \u003c-c.Changes():\n            if !ok {\n                return\n            }\n            if err := buffer.AddChange(ctx, change); err != nil {\n                log.Printf(\"Error storing change in KV: %v\", err)\n            }\n            // ...\n        }\n    }\n}(client)\n```\n\nIf `buffer.AddChange()` returns an error, the goroutine continues. When a new client is created, the old goroutine may still be running.\n\n## Fix\nTrack goroutines and ensure proper cleanup when client is replaced or closed.","status":"closed","priority":1,"issue_type":"bug","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T12:59:12.792954-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T14:28:53.385441-08:00","closed_at":"2026-01-17T14:28:53.385441-08:00","close_reason":"Closed"}
{"id":"kasho-md7","title":"Create mysql-bootstrap-sync tool","description":"Create a new tool for bootstrapping MySQL replicas from mysqldump files.\n\n## Technical Approach\n- Use PingCAP TiDB parser for SQL parsing (most MySQL-compatible Go parser)\n- Parse mysqldump output format (INSERT statements, not COPY format)\n- Generate Change objects compatible with existing kvbuffer\n\n## Key Components to Create\n- tools/runtime/mysql-bootstrap-sync/cmd/main.go\n- tools/runtime/mysql-bootstrap-sync/internal/parser/dump.go\n- tools/runtime/mysql-bootstrap-sync/internal/parser/sql.go (TiDB parser wrapper)\n- tools/runtime/mysql-bootstrap-sync/internal/converter/change.go\n- tools/runtime/mysql-bootstrap-sync/internal/converter/position.go (binlog position handling)\n- tools/runtime/mysql-bootstrap-sync/internal/bootstrap/bootstrap.go\n\n## mysqldump Format Differences from pg_dump\n- Uses INSERT INTO ... VALUES (...), (...) (extended inserts)\n- No COPY format\n- NULL is literal NULL, not \\N\n- No dollar-quoted strings\n- Different comment format\n- SET statements for character set, etc.\n\n## Position Tracking\n- Generate synthetic positions for bootstrap data\n- Ensure bootstrap positions sort before real binlog positions\n- Format: mysql-bootstrap:sequence or similar\n\n## Dependencies\n- github.com/pingcap/tidb/pkg/parser (TiDB parser, v5.3.0+)\n- Existing pkg/kvbuffer (reuse)\n- Existing pkg/types (reuse Change, DMLData, DDLData)\n\n## Estimated Effort: 2 weeks","notes":"## Bootstrap Consistency (Additional Detail)\nUnlike PostgreSQL (exported snapshots), MySQL uses different approaches:\n- Option A: LOCK TABLES + mysqldump (simpler but blocking)\n- Option B: GTID-based consistency point (non-blocking but more complex)\n\nStartBootstrap.snapshot_name proto field may be unused or repurposed for MySQL.\nConsider using GTID position string instead of snapshot name.","status":"closed","priority":2,"issue_type":"feature","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:26:22.376194-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T12:42:28.89425-08:00","closed_at":"2026-01-17T12:42:28.89425-08:00","close_reason":"mysql-bootstrap-sync tool implemented with mysqldump parser, change converter, and bootstrap coordinator. All tests pass.","dependencies":[{"issue_id":"kasho-md7","depends_on_id":"kasho-wod","type":"blocks","created_at":"2026-01-17T10:32:04.197429-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-md7","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:12.956403-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-md7","depends_on_id":"kasho-tsm","type":"blocks","created_at":"2026-01-17T10:45:07.747339-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-ot1","title":"Add MySQL support to Kasho","description":"Epic: Extend Kasho to support MySQL as an alternative to PostgreSQL. This involves creating new MySQL-specific services, renaming existing services to be explicit about database type, updating documentation, and ensuring developer ergonomics are maintained.\n\n## Goals\n- Support MySQL 8.0+ as a source database (8.4+ when go-mysql library supports it)\n- Maintain feature parity with PostgreSQL support\n- Keep codebases separate where database-specific (change-stream, bootstrap-sync)\n- Share code where database-agnostic (translicator, transforms, kvbuffer)\n\n## Key Decisions\n- Use go-mysql-org/go-mysql library for MySQL binlog CDC\n- Use PingCAP TiDB parser for mysqldump parsing\n- Rename pg-translicator to translicator (shared)\n- Be explicit everywhere: pg-development, mysql-development, etc.\n- Single demo app with database selector (not separate apps)\n- Tabbed documentation for PostgreSQL/MySQL side-by-side\n\n## Estimated Total Effort: 14-18 weeks\n\n## Reference\nThis epic was planned based on detailed analysis of:\n- Current PostgreSQL implementation in pg-change-stream, pg-translicator, pg-bootstrap-sync\n- MySQL CDC capabilities via go-mysql-org/go-mysql\n- MySQL 8.4+ compatibility status (partial in go-mysql, issue #866)\n- Documentation, demo app, and environment structure","status":"open","priority":1,"issue_type":"feature","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:25:52.902609-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T10:25:52.902609-08:00"}
{"id":"kasho-s4z","title":"Add tests for mysql-bootstrap-sync bootstrap orchestrator","description":"## Location\ntools/runtime/mysql-bootstrap-sync/internal/bootstrap/bootstrap.go (0% coverage)\n\n## Issue\nCritical bootstrap orchestration logic has no unit tests.\n\n## Missing Test Cases\n- TestBootstrapper_Bootstrap - happy path with mixed DDL/DML\n- TestBootstrapper_storeChanges - testing KV buffer storage\n- TestBootstrapper_storeChanges_WithErrors - error handling during storage\n- TestBootstrapper_storeChanges_Cancellation - context cancellation handling\n- TestBootstrapper_GetStatistics - statistics tracking\n- TestBootstrapper_Close - proper cleanup\n\n## Notes\nWill require mocking kvbuffer for unit tests.","status":"open","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T12:59:38.534186-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T12:59:38.534186-08:00"}
{"id":"kasho-tsm","title":"Rename proto LSN fields to position for database-agnostic terminology","description":"Rename all LSN-specific fields in proto/change_stream.proto to use generic 'position' terminology that works for both PostgreSQL LSN and MySQL binlog positions.\n\n## Changes Required\n\n### Proto file (proto/change_stream.proto)\n- `StreamRequest.last_lsn` → `last_position`\n- `Change.lsn` → `position`\n- `StatusResponse.start_lsn` → `start_position`\n- `StatusResponse.current_lsn` → `current_position`\n- Update all comments to use \"position\" instead of \"LSN\"\n\n### Services to Update\nAfter proto regeneration, update all services that use these fields:\n- services/pg-change-stream/ - all references to lsn fields\n- services/pg-translicator/ - all references to lsn fields\n- tools/runtime/pg-bootstrap-sync/ - all references to lsn fields\n\n### Package Updates\n- pkg/kvbuffer/ - Update LSN references to Position terminology\n\n## Rationale\nPostgreSQL uses LSN (Log Sequence Number) for replication position tracking.\nMySQL uses binlog file:position or GTIDs. Using generic \"position\" terminology\nallows the proto definition to work for both databases.\n\n## Breaking Change\nThis is a breaking change to the proto interface. All services must be updated\nsimultaneously.\n\n## Estimated Effort: 2-3 days","status":"closed","priority":1,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:44:26.369389-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T11:20:42.640239-08:00","closed_at":"2026-01-17T11:20:42.640239-08:00","close_reason":"Implemented in feature/mysql-support branch","dependencies":[{"issue_id":"kasho-tsm","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:45:11.343225-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-tuq","title":"Remove external port exposure for pg-change-stream gRPC in demo docker-compose","description":"Change pg-change-stream from 'ports: 50051:50051' to 'expose: [50051]' so the gRPC API is only accessible within the Docker network.","status":"closed","priority":1,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T08:45:41.880954-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T08:47:42.359598-08:00","closed_at":"2026-01-17T08:47:42.359598-08:00","close_reason":"Changed ports to expose in docker-compose.yml","dependencies":[{"issue_id":"kasho-tuq","depends_on_id":"kasho-2nj","type":"blocks","created_at":"2026-01-17T08:45:56.504199-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-veu","title":"Rename internal LSN field to Position in pkg/types","description":"The proto API was updated to use 'position' terminology (kasho-tsm), but the internal pkg/types/change.go still uses 'LSN':\n\n## Current State\n- **Proto API**: Uses `position` ✓\n- **Internal types**: Uses `LSN` ✗\n- **JSON serialization**: Uses `\"lsn\"` ✗\n\n## Files to Update\n\n### pkg/types/change.go\n- Line 79: `LSN string` → `Position string`\n- Line 89-91: `GetLSN()` → `GetPosition()`\n- Lines 101, 105: JSON struct field\n- Lines 113, 120: JSON unmarshal\n\n### Dependent files (update all references)\n- tools/runtime/mysql-bootstrap-sync/internal/converter/change.go\n- tools/runtime/mysql-bootstrap-sync/internal/bootstrap/bootstrap.go\n- tools/runtime/mysql-bootstrap-sync/internal/converter/change_test.go\n- tools/runtime/pg-bootstrap-sync/ (similar files)\n- services/pg-change-stream/\n- services/mysql-change-stream/\n- pkg/kvbuffer/\n\n## JSON Backwards Compatibility\nThe JSON field name `\"lsn\"` is used in Redis for stored changes. Options:\n1. Keep JSON as `\"lsn\"` for backwards compatibility (struct tag only)\n2. Migrate to `\"position\"` and handle migration of existing Redis data\n3. Support both during unmarshal (read `lsn` or `position`)\n\n## Estimated Effort: 1 day","status":"closed","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T12:56:22.640717-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T16:24:34.846868-08:00","closed_at":"2026-01-17T16:24:34.846868-08:00","close_reason":"Merged PR: LSN → Position refactor complete, all tests passing, PostgreSQL manually verified"}
{"id":"kasho-wod","title":"Update kvbuffer for MySQL position tracking","description":"Update the kvbuffer package to support MySQL binlog positions alongside PostgreSQL LSNs.\n\n## Current Implementation (pkg/kvbuffer/)\n- Uses PostgreSQL LSN format for sorted set scores\n- LSN format: '0/ABCD1234' → numeric score\n\n## MySQL Position Formats\n1. **Binlog file + position**: mysql-bin.000003:1234\n2. **GTID**: 3E11FA47-71CA-11E1-9E33-C80AA9429562:1-5\n\n## Changes Needed\n\n### Position Interface\n```go\n// pkg/kvbuffer/position.go\ntype Position interface {\n    String() string\n    Score() float64  // For Redis sorted set ordering\n}\n\ntype PostgresLSN struct { ... }\ntype MySQLBinlogPosition struct {\n    File   string  // mysql-bin.000003\n    Offset uint64  // 1234\n}\ntype MySQLGTID struct { ... }\n```\n\n### Score Calculation\n- PostgreSQL LSN: Parse hex to uint64\n- MySQL binlog: Combine file number + offset\n- MySQL GTID: Parse transaction sequence\n- Bootstrap positions: Negative scores (sort before real positions)\n\n### Buffer Keys\nConsider database-specific keys or unified approach:\n- Option A: pg:changes, mysql:changes (separate streams)\n- Option B: changes:{db_type} (parameterized)\n- Option C: Single 'changes' key (unified, positions must be comparable)\n\nRecommend Option A for isolation.\n\n## Estimated Effort: 3-5 days","notes":"## Module Updates (Additional Detail)\n- Ensure Position interface is properly exported from pkg/kvbuffer\n- Update imports in services that use kvbuffer\n- Consider if go.mod needs updates for new Position types\n- mysql-change-stream and mysql-bootstrap-sync will import this interface","status":"closed","priority":2,"issue_type":"task","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T10:31:51.954367-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T11:42:17.081118-08:00","closed_at":"2026-01-17T11:42:17.081118-08:00","close_reason":"Implemented in feature/mysql-support branch","dependencies":[{"issue_id":"kasho-wod","depends_on_id":"kasho-ot1","type":"blocks","created_at":"2026-01-17T10:32:12.755636-08:00","created_by":"jeffreywescott"},{"issue_id":"kasho-wod","depends_on_id":"kasho-tsm","type":"blocks","created_at":"2026-01-17T10:45:07.844603-08:00","created_by":"jeffreywescott"}]}
{"id":"kasho-yky","title":"Fix SQL injection in dialect SyncSequences methods","description":"## Location\n- services/translicator/internal/dialect/postgres.go:95,101\n- services/translicator/internal/dialect/mysql.go:103,111\n\n## Issue\nIdentifiers in SyncSequences() are not properly quoted, allowing potential SQL injection:\n\nPostgreSQL (postgres.go:95,101):\n```go\nerr := db.QueryRowContext(ctx, fmt.Sprintf(\"SELECT COALESCE(MAX(%s), 1) FROM %s\", column, fullTable)).Scan(\u0026maxVal)\n_, err = db.ExecContext(ctx, fmt.Sprintf(\"SELECT setval('%s', %d, true)\", fullSeq, maxVal.Int64))\n```\n\nMySQL (mysql.go:103,111):\n```go\nmaxQuery := fmt.Sprintf(\"SELECT COALESCE(MAX(\\`%s\\`), 0) + 1 FROM \\`%s\\`.\\`%s\\`\", column, schema, table)\nalterQuery := fmt.Sprintf(\"ALTER TABLE \\`%s\\`.\\`%s\\` AUTO_INCREMENT = %d\", schema, table, maxVal.Int64)\n```\n\nWhile data comes from system metadata (lower risk), malicious table/column names could manipulate SQL execution.\n\n## Fix\nUse `QuoteIdentifier()` method for all identifier interpolation:\n```go\nerr := db.QueryRowContext(ctx, fmt.Sprintf(\"SELECT COALESCE(MAX(%s), 1) FROM %s\", \n    d.QuoteIdentifier(column), d.QuoteIdentifier(fullTable))).Scan(\u0026maxVal)\n```","status":"closed","priority":1,"issue_type":"bug","owner":"jeffrey.wescott@gmail.com","created_at":"2026-01-17T12:59:38.387252-08:00","created_by":"jeffreywescott","updated_at":"2026-01-17T15:01:26.141605-08:00","closed_at":"2026-01-17T15:01:26.141605-08:00","close_reason":"Closed"}
